# 1、Linux操作系统

## 1.1 什么是操作系统

**操作系统**英文原称Operating System(简称**OS**)，主要功能是实现计算机硬件与软件的直接控制，并进行管理协调。
**服务器操作系统**一般指的是安装在大型计算机上的操作系统，比如Web服务器、应用服务器和数据库服务器等，是企业IT系统的基础架构平台，相比个人版操作系统，服务器操作系统要承担额外的管理、配置、稳定、安全等功能，处于每个网络中的心脏部位。
服务器操作系统主要分为四大流派：WINDOWS、NETWARE、UNIX、LINUX。

**Linux**操作系统是国外一些编程爱好者在Posix和Unix基础上开发出来的，支持多用户、多任务、多线程、多CPU。
Linux开放源代码政策，使得基于其平台的开发与使用无须支付任何单位和个人的版权费用，成为后来很多操作系统厂家创业的基石，同时也成为目前国内外很多保密机构服务器操作系统采购的首选。

## 1.2 Linux操作系统发展与起源

Linux最早是**Linus Torvalds**在1991年开始设计开发的。
Linus是芬兰人，赫尔辛基是芬兰的首都，当时他正是赫尔辛基大学计算机系的学生，23岁。
芬兰是北欧的一个小国，国土大部分处在北极圈内。Linux的标志是可爱的企鹅，取自芬兰的吉祥物。

## 1.3 主流Linux操作系统介绍

**CentOs**

CentOS（Community Enterprise Operating System，中文意思是：社区企业操作系统）是Linux发行版之一，它是来自于Red Hat Enterprise Linux依照开放源代码规定释出的源代码所编译而成。
由于出自同样的源代码，因此有些要求高度稳定性的服务器以CentOS替代商业版的Red Hat Enterprise Linux使用。两者的 不同，在于CentOS并不包含封闭源代码软件。



**Ubuntu**

Ubuntu（乌班图）是一个以桌面应用为主的Linux操作系统，其名称来自非洲南部祖鲁语或豪萨语的“ubuntu”一词，意思是“人性”、“我的存在是因为大家的存在”。
Ubuntu基于Debian发行版和GNOME桌面环境，Ubuntu的目标在于为一般用户提供一个最新的、同时又相当稳定的主要由自由软件构建而成的操作系统。Ubuntu具有庞大的社区力量，用户可以方便地从社区获得帮助。2013年1月3日，Ubuntu正式发布面向智能手机的移动操作系统。



**自由的Debian**

初始版本：1993年8月16日
DebianGNU/Linux是由一个叫做伊恩·默多克（IanMurdock）的牛人在1993年发起的，他的名字以Ian开头，他太太的名字Debra开头三个字母是Deb，于是在爱情的力量下，他发起了DebianGNU/Linux组织。

# 2、新手必须掌握的Linux命令

## 1、强大好用的shell

### 1.1 什么是shell

- 计算机硬件是由运算器、控制器、存储器、输入/输出设备等共同组成的，而让各种硬件设备各司其职且又能协同运行的东西就是系统内核。

- Linux系统的内核负责完成对硬件资源的分配、调度等管理任务。由此可见，系统内核对计算机的正常运行来讲是太重要了，因此一般不建议直接去编辑内核中的参数，而是让用户通过基于系统调用接口开发出的程序或服务来管理计算机，以满足日常工作的需要
- Shell就是这样的一个命令行工具。
- Shell（也称为终端或壳）充当的是人与内核（硬件）之间的翻译官，用户把一些命令“告诉”终端，它就会调用相应的程序服务去完成某些工作。
- 现在包括红帽系统在内的许多主流Linux系统默认使用的终端是Bash（Bourne-Again SHell）解释器。

### 1.2 bash介绍

- bash是一个为GNU计划编写的Unix shell。它的名字是一系列缩写：Bourne-Again Shell。
- Bourne shell是一个早期的重要shell，由史蒂夫·伯恩在1978年前后编写，并同Version 7 Unix一起发布。bash则在1987年由布莱恩·福克斯创造。

### 1.3 bash主要功能

命令行编辑功能
命令和文件名补全功能
命令历史功能
命令别名功能
提供作业控制功能
具有将命令序列定义为功能键的功能
灵活的Shell脚本编程

## 2、执行查看帮助命令

### 2.1 Linux命令格式

Linux系统中已经有了Bash这么好用的“翻译官”，那么接下来就有必要好好学习下怎么跟
它沟通了。要想准确、高效地完成各种任务，仅依赖于命令本身是不够的，还应该根据实际
情况来灵活调整各种命令的参数。
Linux命令格式由三部分组成：**命令名称，命令选项，命令参数。**

**语法格式**：命令名称 [命令选项] [命令参数]



**命令参数**一般是指要处理的文件、目录、用户等资源。
**命令选项**可以用长格式（完整的选项名称），也可以用短格式（单个字母的缩写），两者分
别用--与-作为前缀。
Linux新手不会执行命令大多是因为参数比较复杂，参数值需要随不同的命令和需求情况而
发生改变。

### 2.2 Linux命令中的其他组成

命令提示符是在操作系统中，提示进行命令输入的一种工作提示符。在不同的操作系统
环境下，命令提示符各不相同。
在Linux环境中，输入界面中的如下所示是命令提示符，表示命令输入的状态。

[当前用户账号@当前主机名 路径最后一个目录 ] #或者$
管理员root用户的提示符“#”
```[root@localhost ~]#```
普通用户提示符“$”
```[teacher@localhost ~]$```

命令的各组成部分之间用空格分隔
命令的输入以**回车键**结束
一般一行输入一条命令
命令区分大小写
如果命令过长，可以输入“\”符号进行换行继续输入

### 2.3 Linux帮助命令

help命令
用于显示shell内部命令的帮助信息
$ help pwd
“--help”命令选项
$ touch --help



使用man命令阅读手册页
man指令可以查看Linux中的指令帮助、配置文件帮助和编程帮助等信息
$ man ls

## 3、常用系统工作命令

**1．echo命令**

echo命令用于在终端输出字符串或变量提取后的值，格式为“echo [字符串 | $变量]”。
例如，把指定字符串“Linux”输出到终端屏幕的命令为：
```	[root@linux ~]# echo Linux```
该命令会在终端屏幕上显示如下信息：
```	Linux```

**2．date命令**

date命令用于显示及设置系统的时间或日期，格式为“date [选项] [+指定的格式]”。
只需在强大的date命令中输入以“+”号开头的参数，即可按照指定格式来输出系统的时间或日期，这样在日常工作时便可以把备份数据的命令与指定格式输出的时间信息结合到一起。

| 参数 |       作用       |
| :--: | :--------------: |
|  %t  |     [tab键]      |
|  %H  | 小时（24小时制） |
|  %I  | 小时（12小时制） |
|  %M  |       分钟       |
|  %S  |        秒        |
|  %j  |  今年中的第几天  |

**3．reboot命令**

reboot命令用于重启系统，其格式为reboot。
由于重启计算机这种操作会涉及硬件资源的管理权限，因此默认只能使用root管理员来重启，其命令如下：
```root@linux ~]# reboot```

**4．poweroff命令**

poweroff命令用于关闭系统，其格式为poweroff。
该命令与reboot命令相同，都会涉及硬件资源的管理权限，因此默认只有root管理员才可以关闭电脑，其命令如下：
```[root@linux ~]# poweroff```

**5．ps命令**

ps命令用于查看系统中的进程状态，格式为“ps [选项]”。
**常用选项：**
-a显示所有进程（包括其他用户的进程）
-u用户以及其他详细信息
-x显示没有控制终端的进程

**6．top命令**

top命令用于动态地监视进程活动与系统负载等信息，其格式为top。
top命令相当强大，能够动态地查看系统运维状态，完全将它看作Linux中的“强化版的Windows任务管理器”。

## 4、系统状态检测命令

**1．ip addr命令**

ip addr命令用于获取网卡配置与网络状态等信息。
使用Ip addr命令来查看本机当前的网卡配置与网络状态等信息时，其实主要查看的就是网卡名称、inet参数后面的IP地址、ether参数后面的网卡物理地址（又称为MAC地址)：

**2．uname命令**

uname命令用于查看系统内核与系统版本等信息，格式为“uname [-a]”。
在使用uname命令时，一般会固定搭配上-a参数来完整地查看当前系统的内核名称、主机名、内核发行版本、节点名、系统时间、硬件名称、硬件平台、处理器类型以及操作系统名称等信息。

**3．uptime命令**

uptime用于查看系统的负载信息，格式为uptime。
uptime命令可以显示当前系统时间、系统已运行时间、启用终端数量以及平均负载值等信息。平均负载值指的是系统在最近1分钟、5分钟、15分钟内的压力情况；负载值越低越好，尽量不要长期超过1，在生产环境中不要超过5。

**4．free命令**

free用于显示当前系统中内存的使用量信息，格式为“free [-h]”。
为了保证Linux系统不会因资源耗尽而突然宕机，运维人员需要时刻关注内存的使用量。在使用free命令时，可以结合使用-h参数以更人性化的方式输出当前内存的实时使用量信息。

**5．who命令**

who用于查看当前登入主机的用户终端信息，格式为“who [选项]”。
这三个简单的字母可以快速显示出所有正在登录本机的用户的名称以及他们正在开启的终端
信息。

**6．last命令**

last命令用于查看所有系统的登录记录，格式为“last [选项]”。
使用last命令可以查看本机的登录记录。但是，由于这些信息都是以日志文件的形式保存在
系统中，因此黑客可以很容易地对内容进行篡改。千万不要单纯以该命令的输出信息而判断
系统有无被恶意入侵

**7．history命令**

命令历史功能的使用
使用上下方向键浏览已输入命令（历史命令）
[root@localhost ~]# history [选项] [历史命令保存文件]
选项：
-c：清空历史命令
-w：把缓存中的历史命令写入历史命令保存文件~/.bash_history历史命令默认会保存1000条,可以在环境变量配置文件/etc/profile中进行修改
历史命令的调用
使用上、下箭头调用以前的历史命令
使用“!n”重复执行第n条历史命令
使用“!!”重复执行上一条命令
使用“!字串”重复执行最后一条以该字符串开头的命令

## 5、 工作目录切换命令

### 5.1linux目录介绍

**树型目录结构**
Linux文件系统采用了多级目录的树型层次结构管理文件。树型结构的最上层是根目录，用／表示。在根目录之下是各层目录和文件。

**工作目录与用户主目录**
当登录Linux时，首先进入到一个特殊的目录，称为主/登录目录。可以通过～来指定(或者引用)主目录。
当前所在的目录称为当前工作目录(又称当前目录)，当前目录可以用“.”表示，当前工作目录的父目录可用“..”表示。

| 目录名     | **说明**                                                     |
| ---------- | ------------------------------------------------------------ |
| **/**      | **Linux系统根目录**                                          |
| /bin       | 存放普通用户可执行文件，系统中的任何用户都可以执行该目录中的命令 |
| /sbin      | 存放系统的管理命令，普通用户不能执行该目录中的命令           |
| **/home**  | **普通用户的主目录，每个用户在该目录下都有一个与用户名同时的目录** |
| **/etc**   | **存放系统配置和管理文件，这些文件都是文本文件**             |
| /boot      | 存放内核和系统启动程序                                       |
| /usr       | 该目录最庞大，存放应用程序及相关文件                         |
| /dev       | 存放设备文件                                                 |
| /mnt       | 该目录主要用于存放系统引导后被挂载的文件系统的挂载点。       |
| **/root**  | **该目录用于存放根用户（超级用户）的主目录。**               |
| /lib       | 包含支持位于/bin和/sbin下的二进制文件的库文件。              |
| **/media** | **用于挂载可移动设备的临时目录。**                           |
| /srv       | srv代表服务，包含服务器特定服务相关的数据。                  |
| /proc      | 包含系统进程的相关信息                                       |
| /var       | 用于存放系统中经常变化的文件，如日志文件，用户邮件邮件等     |
| /tmp       | 公用的临时文件存储点                                         |

### 5.2工作目录切换命令

**1．pwd命令**
pwd命令用于显示用户当前所处的工作目录，pwd是print working directory的缩写。
命令格式为：“pwd [选项]”

**2．cd命令**
cd命令用于切换工作路径。
**语法格式：cd 目录路径**
可以通过cd命令迅速、灵活地切换到不同的工作目录。
cd后没有任何参数该命令直接回到用户主目录
使用**“cd ~”**命令切换到当前用户的家目录
使用**“cd ..”**命令进入上级目录
使用**“cd ~username”**切换到其他用户的家目录
可以使用**“cd -”**命令返回到上一次所处的目录

cd命令路径的表示
相对路径是以“.”或“..”开始的目录路径表示形式
```cd ./test```
绝对路径是以“/”开始的路径表示形式
```cd /home```

**3．ls命令**
所处的工作目录不同，工作目录下的文件肯定也不同，ls命令用于显示目录中的文件信息。
命令格式：ls [选项] [文件]
命令选项：
-t：按照修改时间排列显示
-a：看到全部文件（包括隐藏文件）
-l：可以查看文件的属性、大小等详细信息
将l和a参数整合之后，再执行ls命令即可查看当前目录中的所有文件并输出这些文件的属性信息。



Linux文件系统中的文件是数据的集合，文件系统不仅包含着文件中的数据而且还有文件系统的结构，所有Linux用户和程序看到的文件、目录、软连接及文件保护信息等都存储在其中。
**Linux中的设备、磁盘等所有信息均存在文本文件里。**
**Linux不使用文件名扩展来识别文件的类型。**
**Linux文件中以“.”开头的是隐藏文件。**
**Linux文件中以“~”结尾的是备份文件**

**Linux文件类型：**
1.普通文件（-）
2.目录（d）
3.字符设备文件（c）
4.块设备文件（b）
5.套接口文件（s）
6.管道（p）
7.符号链接文件（l）

## 6、文本文件编辑命令

### 6.1Linux文本文件介绍

Linux系统中“一切都是文件”，而对服务程序进行配置自然也就是编辑程序的配置文件。如果不能熟练地查阅系统或服务的配置文件，那以后工作就很难顺利开展。
文本文件在Linux中为了进行类型的区分，都带有不同的颜色。在Linux字符界面中输入了ls -l以后的文件列表中可以看到这些文本的颜色。

绿色文件：可执行文件，可执行的程序
红色文件：压缩文件或者包文件
蓝色文件：目录
白色文件：一般性文件，如文本文件，配置文件，源码文件等
浅蓝色文件：链接文件，主要是使用ln命令建立的文件
红色闪烁：表示链接的文件有问题
黄色：表示设备文件
灰色：表示其他文件

### 6.2Linux文本文件查看命令

**1．cat命令**
cat命令用于查看纯文本文件（内容较少的）。可以将整个文件的内容从上到下显示在屏幕上。
语法格式：```cat [-AbeEnstTuv] [--help] [--version] 文件名称```
常用选项：
-n或--number由1开始对所有输出的行数编号

直接在#提示符后面输入cat，会进入一个交互模式，输入什么内容回车后会显示什么内容。
Ctrl+c可以强制中断命令执行
Ctrl+d可以退出交互模式

#cat >file1.txt可以把内容写入到file1.txt文件中，也会进入输入模式。
Ctrl+d保存退出

**2．more命令**
more命令用于查看纯文本文件（内容较多的）
语法格式：```more [选项]文件```
more会以**一页一页**的显示方便使用者逐页阅读，而最基本的指令就是按**空白键（space）**就往下一页显示，按**回车键**就会向下滚动一行，按**b键**就会往回（back）一页显示，按**q键**停止显示，而且还有搜寻字串的功能。
more会进入一种全屏的查看状态，如果文档结束，会自动退出查看状态
例子：

```#more /etc/passwd```

**3．less命令**
less工具也是对文件或其它输出进行分页显示的工具，应该说是Linux正统查看文件内容的工具，功能极其强大。
使用了less时，就可以使用**[pageup][pagedown]**等按键的功能来往前往后翻看文件，更容易用来查看一个文件的内容！
除非用**q键**退出查看的状态，可以反复查看文件内容。
例子：

```#less /etc/passwd```

**4．head命令**
head命令的作用是显示文件的头部内容（默认10行）
语法格式：
```head [必要选项] [选择选项] [文件]```
常用选项：
-n 用数字来指定显示的行数。
实例：```#head -4 /etc/passwd```

5．tail命令
tail命令的作用是显示文件的尾部内容（默认10行）
语法格式：
```tail [必要选项] [选择选项] [文件]```
常用选项：
-n 用数字来指定显示的行数。
实例：```#tail -4 /etc/passwd```

### 6.3Linux文本文件编辑命令

**1．wc命令**
wc命令用于统计指定文本的行数、字数、字节数
语法格式：```wc [选项] 文本```
Linux系统中的wc命令用于统计文本的行数、字数、字节数等
常用选项：
-l只显示行数
-w只显示单词数
-c只显示字节数

**2．cut命令**
cut命令用于按“列”提取文本字符
命令格式：```cut [参数] 文本```
主要参数：
-b：以字节为单位进行分割。
-c：以字符为单位进行分割。
-d：自定义分隔符，默认为制表符。
-f：与-d一起使用，指定显示哪个区域。

**3．diff命令**
diff命令用于比较两个文件内容的不同。
语法格式：```diff [选项] 源文件 目标文件```
常用选项：
-y：以并列的方式显示文件的异同之处。
-b：忽略空格造成的不同。
-B：忽略空行造成的不同。
-q：只报告什么地方不同，不报告具体的不同信息。
-i：忽略大小写的变化。
-W：在使用-y参数时，指定栏宽。

## 7、文件目录管理命令

### 7.1Linux文件类型查看

**1、file命令**
file命令用于查看文件的类型，格式为“file 文件名”。
在Linux系统中，由于文本、目录、设备等所有这些一切都统称为文件，而我们又不能单凭后缀就知道具体的文件类型，这时就需要使用file命令来查看文件类型了。

### 7.2Linux文本管理命令

**1、touch命令**
touch命令用于创建空白文件或设置文件的时间。
命令格式：```touch [选项] 文件或目录名```
命令选项：
-d	“YYYYMMDD HH:mm:SS”：修改文件的修改/存取时间
实例：
创建一个空文件（文件原来不存在）
```#touch test```
把当前目录下的所有文件的存取和修改时间改为当前系统的时间。
```#touch *```
把文件chap1.txt的存取和修改时间改为2020年4月27日。
```#touch -d “20200427” chap1.txt```

### 7.3Linux目录管理命令

1．mkdir命令
mkdir命令用于创建空白的目录。除了能创建单个空白目录外，mkdir命令还可以结合-p参数来递归创建出具有嵌套叠层关系的文件目录。
命令格式：```mkdir [选项] <目录名>```
命令选项：-p：循环建立目录
实例：

```
# mkdir /d1
# mkdir /d1/d2
# mkdir –p /d3/d4
```



2．rmdir命令
删除目录（为空目录）
命令格式：```rmdir [选项] <目录名>```
命令选项：-p： 循环删除目录
实例：

```
# rmdir ./a1
# rmdir /etc/a2
# rmdir -p /d1/d2
```



3．cp命令
拷贝文件或目录（相当于DOS下的copy命令）
命令语法：```cp [选项] 源文件 目标文件```
常用选项：
-r复制目录，如果目录存在，则提示。
-f或--force强行复制文件或目录，不论目的文件或目录是否已经存在
-i或--interactive　覆盖既有文件之前先询问用户。
-u或--update使用这项参数之后，只会在源文件的修改时间(Modification Time)较目的文件更新时，或是名称相互对应的目的文件并不存在，才复制文件
-p或--preserve　保留源文件或目录的属性。

实例：
```[root @localhost home]#cp /home/my/test /home/	```将test文件拷贝到home目录下

```[root @localhost home]#cp abc bbb```				将当前目录下的abc文件复制到当前目录下，更改名称为bbb

```[root @localhost home]#cp -r /home/my /	```				将my文件夹拷贝到根目录下

```[root @localhost home]#cp -p /home/my /root```		保留源文件的属性

4．rm命令
rm命令用于删除文件或目录。想要删除目录，需要在rm命令后面一个-r参数才可以，否
则删除不掉。
命令语法：```rm [选项] 目标文件```
常用选项：
-r或者-R将参数中列出的全部目录和子目录均递归地删除。
-f或--force　强制删除文件或目录，忽略不存在的文件，从不给出提示。
-i或--interactive　删除既有文件或目录之前先询问用户。**默认**

实例：
```[test @localhost test]$rm *```			删除当前目录下的所有文件，但子目录和以“.”开头的文件(即隐含文件)不删除。
```[test @localhost test]$rm –ir bak```		删除当前目录下的子目录bak，包含其下的所有文件和子目录，并且提示用户确认。
```[test @localhost test]$ rm –rf test```		强制性删除某个非空目录test，没有任何提示

5．mv命令
mv命令用于剪切文件或将文件重命名
命令语法：```mv [选项] 源文件 [目标路径|目标文件名]```
常用选项：
-f：不论目标文件或目录是否存在，均不提示是否覆盖目标文件或目录。

实例：
```[test @localhost test]$mv 1.txt 2.txt```	这里移动文件时并不改变文件的目录，如果2.txt原来不存在，则实际上是1.txt更名为2.txt
```[test @localhost test]$mv ~/txtbak /bak```	把个人主目录下的文件txtbak移动到/bak目录下

## 8.打包压缩与搜索命令

### 8.1Linux压缩格式介绍

了，它有.gz、.tar.gz、tgz、bz2、.Z、.tar等众多的压缩文件名，此外windows下的.zip和.rar也可以在Linux下使用，不过在Linux使用.zip和.rar的人就太少了。

**tar**是linux常见的一种归档文件，打包文件，不包括压缩的功能。他只消耗非常少的CPU
以及时间去打包文件。
**tar.gz**是linux中使用得最多的压缩格式，这种格式一般是先归档然后再压缩，它在压缩时
不会占用太多的cpu，而且压缩比率理想。
**tar.bz**2是linux中压缩率最好的压缩格式，但是，压缩率好就意味这要消耗更多的cpu时
间。

### 8.2Linux打包压缩命令

**1．tar命令**
tar命令用于对文件进行打包压缩或解压，tar命令可以把一系列的文件归档到一个大文件中，也可以把档案文件解开以恢复数据。
命令语法：```tar [选项] 档案文件 文件列表```
常用选项：
-c：生成档案文件。
-v：列出归档解档的详细过程。
-f：指定档案文件名称。
-r：将文件追加到档案文件末尾。
-z：以gzip格式压缩或解压缩文件。
-j：以bzip2格式压缩或解压缩文件。
-t：查看内容。
-x：解开档案文件。

实例一：将整个 /etc 目录下的文件全部打包成为 /tmp/etc.tar
```[root@linux ~]# tar -cvf /tmp/etc.tar /etc```　　　<==仅打包，不压缩！
```[root@linux ~]# tar -zcvf /tmp/etc.tar.gz /etc```　<==打包后，以 gzip 压缩
```[root@linux ~]# tar -jcvf /tmp/etc.tar.bz2 /etc```　 <==打包后，以 bzip2 压缩

实例二：查阅上述 /tmp/etc.tar.gz 文件内有哪些文件？
```[root@linux ~]# tar -ztvf /tmp/etc.tar.gz```

实例三：将 /tmp/etc.tar.gz 文件解压缩在 /usr/local/src 底下
```[root@linux ~]# cd /usr/local/src```
```[root@linux src]# tar -zxvf /tmp/etc.tar.gz```

### 8.3Linux搜索命令

**1．find命令**
命令语法：
```find pathname -options 参数```
（pathname: find命令所查找的目录路径）
选项参数：
-name按照文件名查找文件。
-user按照文件属主来查找文件
-group按照文件所属的组来查找文件。
查找过程可以使用通配符，*表示多位字符，？表示一位字符

实例一：
```[root @localhost /root]#find / -name passwd```
从根目录起查找名为passwd的文件，并把结果输出到标准设备。

```[root @localhost /root]#find /home /etc –user twelveeee```
在目录/home和目录/etc中查找twelveeee用户所拥有的文件。

实例二：
查找文件名中包含某字符（如"elm"）的文件
```find /home/ -name ‘*elm*‘ ```中间包含elm的文件
```find /home/ -name ‘elm*‘``` 以elm开头的文件
```find /home/ -name ‘*elm‘ ```以elm结尾的文件
```find /home/ -name ‘elm？'``` 以elm开头的4字符名称的文件

**2．grep命令**
grep命令用于在文本中执行关键词搜索，并显示匹配的结果。
命令语法：
```grep [参数] 要查找的字符串 文件名```
参数选项：
-v：反向选择，仅列出没有“关键词”的行。
-c：仅显示找到的行数
-i：不区分大小写。
-b：将可执行文件(binary)当作文本文件（text）来搜索
-n：每个匹配行只按照相对的行号显示。

**3．whereis命令**
whereis命令用来寻找命令的可执行文件所在的位置。
命令语法：```whereis [参数] 命令名称```
参数选项：
-b：只查找二进制文件。
-m：只查找命令的联机帮助手册部分。
-s：只查找源代码文件。

**4．whatis命令**
whatis命令whatis命令用于获取命令简介。
命令语法：```whatis 命令名称```

## 9、重定向与管道符

### 9.1 输入输出重定向

输入重定向是指把文件导入到命令中。
输出重定向则是指把原本要输出到屏幕的数据信息写入到指定文件中。
在日常的学习和工作中，相较于输入重定向，我们使用输出重定向的频率更高，所以又将输出重定向分为了标准输出重定向和错误输出重定向两种不同的技术，以及清空写入与追加写入两种模式。
**标准输入重定向**（STDIN，文件描述符为0）：默认从键盘输入
**标准输出重定向**（STDOUT，文件描述符为1）：默认输出到屏幕。
**错误输出重定向**（STDERR，文件描述符为2）：默认输出到屏幕。

| 类别                 | 操作符 | 说明                                                         |
| -------------------- | ------ | ------------------------------------------------------------ |
| 输入重定向           | <      | 输入重定向是将命令中接收输入的途径由默认的键盘更改（重定向）为指定的文件 |
| 输出重定向           | >      | 将命令的执行结果重定向输出到指定的文件中，命令进行输出重定向后执行结果将不显示在屏幕上 |
| 输出重定向           | >>     | 将命令执行的结果重定向并追加到指定文件的末尾保存             |
| 错误重定向           | 2>     | 清空指定文件的内容，并保存标准错误输出的内容到指定文件中     |
| 错误重定向           | 2>>    | 向指定文件中追加命令的错误输出，而不覆盖文件中的原有内容     |
| 输出与错误组合重定向 | &>     | 将标准输出与错误输出的内容全部重定向到指定文件               |
| 输出与错误组合重定向 | &>>    | 将标准输出与错误输出的内容全部以追加方式重定向到指定文件     |

输入重定向相对来说有些冷门，在工作中遇到的概率会小一点。输入重定向的作用是把文件直接导入到命令中。接下来使用输入重定向把readme.txt文件导入给wc -l命令，统计一下文件中的内容行数。
```[root@linuxprobe ~]# wc -l < readme.txt```

实例：
将命令输出重定向到文件:
将标准输出重定向到文件			```$ ls /etc/ > etcdir```
将标准输出重定向追加到文件	```$ ls /etc/sysconfig/ >> etcdir```
将错误输出重定向到文件			```$ nocmd 2> errfile```
将标准输出和错误输出重定向到文件	```$ ls afile bfile &> errfile```

### 9.2 管道符

管道命令符的作用也可以用一句话来概括“把前一个命令原本要输出到屏幕的标准正常数据当作是后一个命令的标准输入”，同时按下键盘上的Shift+\键即可输入管道符，其执行格式为“```命令A | 命令B|命令C|..```”。
这个管道符就像一个法宝，我们可以将它套用到其他不同的命令上，比如用翻页的形式查看/etc目录中的文件列表及属性信息。

### 9.3 命令行的通配符

通配符就是通用的匹配信息的符号，比如星号（*）代表匹配零个或多个字符，问号（?）代表匹配单个字符，中括号内加上数字[0-9]代表匹配0～9之间的单个数字的字符，而中括号内加上字母[abc]则是代表匹配a、b、c三个字符中的任意一个字符。

# 3.Linux文本编辑器

## 1.vim编辑器的基本操作

**1.1 文本编辑器介绍**

文本编辑器的作用:Linux系统中的配置文件以文本文件的形式保存,Linux管理员需要通过编辑配置文件进行系统管理
文本编辑器的分类:行编辑器与全屏幕编辑器,字符界面编辑器与图形界面编辑器
**vim**:Vim是一个高度可配置的、跨平台的、高效率的文本编辑器,大多数Linux系统中缺省使用的文本编辑器。
**Emacs**:用于编辑程序源代码文件的文本编辑器
**nano**:在字符界面提供了菜单操作，易用性较好
**gedit**:GNOME图形环境中的文本编辑器

**1.2 vim编辑器的三个模式**
命令模式：控制光标移动，可对文本进行复制、粘贴、删除和查找等工作
输入模式：正常的文本录入
末行模式：保存或退出文档，以及设置编辑环境

**1.3 vim编辑器的启动和退出**
vim编辑器的启动:
直接进入编辑环境`$ vi`
进入编辑环境并打开（新建）文件`$ vi myfile`
vim编辑器的退出:
退出vi编辑环境
`:q`退出
`:wq`保存退出
输入末行命令放弃对文件的修改，并退出编辑器`:q!`

**1.4 文件的打开和读取**
打开新文件:
打开新的文件到vi编辑器中`:e filename`
打开新的文件到vi编辑器中，并放弃对当前文件的修改`:e! filename`

读取其他文件:读取文件内容到当前vi编辑器中`:r filename`

**1.5 文件保存与另存为**

保存对vi编辑器中已打开文件的修改`:w`
将vi编辑器中的内容另存为指定文件名`:w myfile`

## 2.输入模式常见操作

**2.1 进入输入模式**
vim编辑器有三个模式，利用命令进入到vim编辑器中初始面对的是命令模式，命令模式无法对当前文件进行输入操作，必须进入输入模式才能进行文本的输入。进入的方法是按键盘上的i、a、o这几个键。

| 命令 | 功能                                                       |
| ---- | ---------------------------------------------------------- |
| i    | 在当前光标处进入插入状态                                   |
| a    | 在当前光标后进入插入状态                                   |
| A    | 将光标移动到当前行的行末，并进入插入状                     |
| o    | 在当前行的下面插入新行，光标移动到新行的行首，进入插入状态 |
| O    | 在当前行的上面插入新行，光标移动到新行的行首，进入插入状态 |

**2.2 输入模式的编辑操作**

| 按键      | 功能                       |
| --------- | -------------------------- |
| 方向键    | 进行上下左右方向的光标移动 |
| Home      | 快速定位光标到行首         |
| End       | 快速定位光标到行尾         |
| PageUp    | 进行文本的向上翻页         |
| PageDown  | 进行文本的向下翻页         |
| Backspace | 删除光标左侧的字符         |
| Del       | 删除光标位置的字符         |

## 3.命令模式常见操作

**3.1 命令模式的基本操作**
输入vi命令后,便进入全屏幕编辑环境,此时的状态为命令模式。在命令模式下，我们可以输入一些命令，但是当你点击键盘上相应键输入命令时，这些命令只会呈现最终的效果，不会在编辑器界面上显示出命令的字符。

**3.2 行内快速跳转**

| 操作键 | 功能                                                 |
| ------ | ---------------------------------------------------- |
| ^      | 将光标快速跳转到本行的行首字符home                   |
| $      | 将光标快速跳转到本行的行尾字符end                    |
| w      | 将光标快速跳转到当前光标所在位置的后一个单词的首字母 |
| b      | 将光标快速跳转到当前光标所在位置的前一个单词的首字母 |
| e      | 将光标快速跳转到当前光标所在位置的后一个单词的尾字母 |
| 方向键 | 进行上下左右方向的光标移动                           |
| Home   | 快速定位光标到行首                                   |
| End    | 快速定位光标到行尾                                   |

**3.3 行间快速跳转**

| 命令      | 功能                   |
| --------- | ---------------------- |
| :set nu   | 在编辑器中显示行号     |
| :set nonu | 取消编辑器中的行号显示 |
| 1G        | 跳转到文件的首行       |
| G         | 跳转到文件的末尾行     |
| #G        | 跳转到文件中的第#行    |
| PageUp    | 进行文本的向上翻页     |
| PageDown  | 进行文本的向下翻页     |

## 4.vim编辑器的删除与撤销

**4.1 文件内容的删除**

| 命令   | 功能                                                       |
| ------ | ---------------------------------------------------------- |
| x      | 删除光标处的单个字符=delete                                |
| **dd** | **删除光标所在行5dd可以删除5行内容**                       |
| dw     | 删除当前字符到单词尾（包括空格）的所有字符                 |
| de     | 删除当前字符到单词尾（不包括单词尾部的空格）的所有字符     |
| d$     | 删除当前字符到行尾的所有字符                               |
| d^     | 删除当前字符到行首的所有字符                               |
| J      | 删除光标所在行行尾的换行符，相当于合并当前行和下一行的内容 |

**4.2 文件内容的撤销**

| **命令**   | **功能**                                                     |
| ---------- | ------------------------------------------------------------ |
| **u**      | **取消最近一次的操作，并恢复操作结果可以多次使用u命令恢复已进行的多步操作** |
| U          | 取消对当前行进行的所有操作                                   |
| **Ctrl+r** | **对使用u命令撤销的操作进行恢复**                            |

## 5.vim编辑器的复制与粘贴

单行复制：在命令模式下，将光标移动到将要复制的行处，按“yy”进行复制；
多行复制：在命令模式下，将光标移动到将要复制的首行处，按“nyy”复制n行；其中n为数字。
粘贴：在命令模式下，将光标移动到将要粘贴的行处，按“p”进行粘贴

| 命令 | 功能                                                         |
| ---- | ------------------------------------------------------------ |
| yy   | **复制当前行整行的内容到vi缓冲区5yy从当前行开始复制5行**     |
| yw   | 复制当前光标到单词尾字符的内容到vi缓冲区                     |
| y$   | 复制当前光标到行尾的内容到vi缓冲区                           |
| y^   | 复制当前光标到行首的内容到vi缓冲区                           |
| p    | **读取vi缓冲区中的内容，并粘贴到光标当前的位置（不覆盖文件已有的内容）** |

## 6.vim编辑器的查找与替换

**6.1 文件内容的查找**
vi提供了几种定位查找一个指定的字符串在文件中位置的方法。同时还提供一种功能强大的全局替换功能。
为查找一个字符串，在vi命令模式下键入“/”，后面跟要查找的字符串，再按回车。vi将光标定位在该串下一次出现的地方上。键入n跳到该串的下一个出现处，键入N跳到该串的上一个出现处。

| 命令      | 功能                                 |
| --------- | ------------------------------------ |
| **/word** | **从上而下在文件中查找字符串“word”** |
| **?word** | **从下而上在文件中查找字符串“word”** |
| **n**     | **定位下一个匹配的被查找字符串**     |
| N         | 定位上一个匹配的被查找字符串         |

**6.2 文件内容的替换**

| 命令              | 功能                                                      |
| ----------------- | --------------------------------------------------------- |
| :s/old/new        | 将当前行中查找到的第一个字符“old”串替换为“new”            |
| :s/old/new/g      | 将当前行中查找到的所有字符串“old”替换为“new”              |
| :#,#s/old/new/g   | 在行号“#,#”范围内替换所有的字符串“old”为“new”             |
| **:%s/old/new/g** | **在整个文件范围内替换所有的字符串“old”为“new”**          |
| :s/old/new/c      | 在替换命令末尾加入c命令，将对每个替换动作提示用户进行确认 |



# 4.用户身份与文件权限

## 1.Linux用户身份介绍

**1.1 Linux用户介绍**
Linux下的用户可以分为三类：超级用户、系统用户和普通用户。每个用户都有一个数值，称为UID。

| 昵称         | 权限                                                         | 功能                                                         | UID        |
| ------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ---------- |
| 超级用户root | 具有一切权限                                                 | 管理系统的各项功能，如添加/删除用户、启动/关闭服务进程、开启/禁用硬件设备 | 0          |
| 系统用户     | 为了满足相应的系统进程对文件属主的要求而建立的系统用户不能用来登录 | Linux系统正常工作所必需的内建的用户，例如：bin、daemon、adm、lp等 | 1~999      |
| 普通用户     | 由管理员赋予的一般权限                                       | 由管理员创建的用于日常工作的用户                             | 从1000开始 |

**1.2 Linux用户相关文件**
用户帐号信息保存在passwd文件中:/etc/passwd
用户的加密口令保存在shadow文件中:/etc/shadow
用户的宿主目录是home目录中与用户名称相同的目录:/home/teacher
用户的初始配置文件来在skel目录（配置模版）:/etc/skel
**1.3 passwd文件介绍**
/etc/passwd文件每一行都表示的是一个用户的信息；一行有7个段位；每个段位用:号分割。
`root:x:0:0:root:/root:/bin/bash`

`账号名称：密码：UID：GID：个人资料：主目录：Shell`

第一字段：用户名（也被称为登录名）
第二字段：口令；在例子中我们看到的是一个x，其实密码已被映射到/etc/shadow文件中
第三字段：UID；用户ID
第四字段：GID；用户组的ID
第五字段：用户名全称，这是可选的
第六字段：用户的家目录所在位置；root这个用户的家目录是/root
第七字段：用户所用SHELL的类型，root用的是bash；所以设置为/bin/bash
**1.4 shadow文件介绍**
Shadow文件一共有9个字段来表示跟密码有关的部分，每个字段用“：”来分隔。
`用户名：密码：最后一次修改时间：最小时间间隔：最大时间间隔：警告时间：不活动时间：失效时间：标志字段说明`
`bin:*:17110:0:99999:7:::`
用户名：和/etc/passwd文件中相对应的用户名。
密码：存放加密后的口令(密码)。密码字段为“*”表示用户被禁止登录，为“！！”表示密码未设置，为“！”表示用户被锁定。
最后一次修改时间：用户最后一次修改口令的时间(从1970-1-1起计的天数)。
最小时间间隔：两次修改口令允许的最小天数。
最大时间间隔：口令保持有效的最多天数，即多少天后必须修改口令。
警告时间：从系统提前警告到口令正式失效的天数。
不活动时间：口令过期多少天后，该账号被禁用。
失效时间：指示口令失效的绝对天数(从1970-1-1开始计算)。
标志：未使用。

**1.5 group文件介绍**
Linux系统关于组的信息存放在文件/etc/group中.Linux的组有私有组、系统组、标准组之分。私有组:建立账户时，若没有指定账户所属的组，系统会建立一个组名和用户名相同的组，这个组就是私有组，这个组只容纳了一个用户。标准组:可以容纳多个用户，组中的用户都具有组所拥有的权利。系统组:Linux系统正常运行所必需的，安装Linux系统或添加新的软件包会自动建立系统组。
`root:x:0:`
`组名：组的密码：GID：组成员`
注：组的密码：设置加入组的密码，一般情况下不使用组密码，该字段通常没用

## 2.创建Linux用户

**2.1 添加Linux用户**
**adduser/useradd**:
创建用户,使用该命令创建用户账户时，默认的用户家目录会被存放在/home目录中，默认的Shell解释器为/bin/bash，而且默认会创建一个与该用户同名的基本用户组。
语法格式：`useradd [选项] 用户名`
常用选项：
-e账户的到期时间，格式为YYYY-MM-DD
-u指定该用户的默认UID
-d指定用户的家目录（默认为/home/username）
-g指定一个初始的已存在用户基本组
-G指定一个或多个扩展用户组
-N不创建与用户同名的基本用户组
-s指定该用户的默认Shell解释器

**2.2 设置Linux用户密码**
**passwd命令**:
用于修改用户密码、过期时间、认证信息等
普通用户只能使用passwd命令修改自身的系统密码，而root管理员则有权限修改其他所有人的密码。更酷的是，root管理员在Linux系统中修改自己或他人的密码时不需要验证旧密码，这一点特别方便。
语法格式：`passwd [选项] [用户名]`
常用选项：
-d使该用户可用空密码登录系统
-l锁定用户，禁止其登录
-u解除锁定，允许用户登录
-S显示用户的密码是否被锁定，以及密码所采用的加密算法名称

## 3.管理Linux用户

**3.1 设置Linux用户账号**
**usermod命令**:
usermod命令用于修改用户的属性
语法格式：`usermod [选项] 用户名`
用户的信息保存在/etc/passwd文件中，可以直接用文本编辑器来修改其中的用户参数项目，也可以用usermod命令修改已经创建的用户信息，诸如用户的UID、基本/扩展用户组、默认终端等。
常用选项：
-g变更所属用户组
-G变更扩展用户组
-L锁定用户禁止其登录系统
-U解锁用户，允许其登录系统

| 选项          | 功能                                                         |
| ------------- | ------------------------------------------------------------ |
| -c comment    | 改变用户的注释，如：全名、地址、办公室电话、家庭电话等       |
| -d dir        | 改变用户的主目录                                             |
| -e YYYY-MM-DD | 修改用户的有效日期                                           |
| -L            | 锁定用户密码，使密码无效                                     |
| -U            | 解除密码锁定                                                 |
| -f days       | 在密码到期的days天后停止使用账户                             |
| -g GID或组名  | 修改用户的所属基本组                                         |
| -l name       | 更改账户的名称，必须在该用户未登录的情况下才能使用           |
| -p 密码       | 修改用户的密码                                               |
| -s Shell      | 修改用户的登录Shell                                          |
| -u UID        | 改变用户的UID为新的值，改变用户的UID时主目录下所有该用户所拥有的文件或子目录将自动更改UID，但对于主目录之外的文件和目录只能用chown命令手工进行设置 |

**3.2 删除Linux用户账号**
**userdel命令**:
userdel命令用于删除用户
语法格式：`userdel [选项] 用户名`
如果我们确认某位用户后续不再会登录到系统中，则可以通过userdel命令删除该用户的所有信息。在执行删除操作时，该用户的家目录默认会保留下来，此时可以使用-r参数将其删除。
常用选项：
-f强制删除用户
-r删除用户时将用户主目录下的所有内容一并删除，同时删除用户的邮箱，对于用户在别的目录下所拥有的文件只能手工删除

## 4.创建与管理Linux用户组

**4.1 创建Linux用户组**
**groupadd命令**:
groupadd命令用来添加用户
语法格式：`groupadd [选项] 群组名`
为了能够更加高效地指派系统中各个用户的权限，在工作中常常会把几个用户加入到同一个组里面，这样便可以针对一类用户统一安排权限。
常用选项：
-g GID指定新组的GID，默认值是已有的最大的GID加1
-r建立一个系统专用组，与-g不同时使用时，则分配一个1～999的GID
例子：
`[root @localhost /root]#groupadd -g 1000 group1`表示添加一个新组，组ID为1000，组名为group1

**4.2 管理Linux用户组**
**groupmod命令**:
groupmod命令用于修改组的属性
语法格式：`groupmod [选项] 群组名`
常用选项：
-g GID指定组新的GID
-n name更改组的名字为name

**4.3 删除Linux用户组**
**groupdel命令**：
删除指定名称的用户组帐号
语法格式：`groupdel 群组名`
需要从系统上删除群组时，可用groupdel指令来完成这项工作。倘若该群组中仍包括某些用户，则必须先删除这些用户后，方能删除群组。

## 5.文件的权限与归属

**5.1 查看文件的权限与归属**
尽管在Linux系统中一切都是文件，但是每个文件的类型不尽相同，因此Linux系统使用了不同的字符来加以区分，常见的字符如下所示。

| 代码 | 文件类型     |
| ---- | ------------ |
| -    | 普通文件     |
| d    | 目录文件     |
| l    | 链接文件     |
| b    | 块设备文件   |
| c    | 字符设备文件 |
| p    | 管道文件     |

`-rw-r--r--`

| 权限项   | 读         | 写         | 执行       | 读             | 写             | 执行           | 读       | 写       | 执行     |
| -------- | ---------- | ---------- | ---------- | -------------- | -------------- | -------------- | -------- | -------- | -------- |
| 字符表示 | r          | w          | x          | r              | w              | x              | r        | w        | x        |
| 数字表示 | 4          | 2          | 1          | 4              | 2              | 1              | 4        | 2        | 1        |
| 权限分配 | 文件所有者 | 文件所有者 | 文件所有者 | 文件所属组用户 | 文件所属组用户 | 文件所属组用户 | 其他用户 | 其他用户 | 其他用户 |

**5.2 修改文件的权限**
**chmod命令**：
用于更改文件对于某类用户的操作权限
`chmod [ugoa...][[+-=][rwx] FILE...`
设置权限的对象，可以是用户、组、其他人或所有人|属性操作符+增加权限-减少权限=设置权限为|权限内容，可以是读、写、执行权限的组合|被设置属性的文件或目录
例子：`-rw-rw-r-- 1 st01 class1 0 Apr 3 16:52 afile`
增加文件属主st01的执行权限（x）`# chmod u+x afile`
去除文件属组class1的写权限（w）`# chmod g-w afile`
设置其他用户的文件权限为可执行`# chmod o=x afile`
设置用户拥有执行权限，其他用户拥有写入权限`#Chmod u+x,o+w afile`
设置用户和用户组拥有执行的权限`#Chmod ug+x afile`

增加文件属主st01的执行权限（x）`# chmod 764 afile`
去除文件属组class1的写权限（w）`# chmod 644 afile`

**5.3 修改文件的归属**
要想改变一个文件对某些用户的权限，除了可以修改它的权限之外，还有一个方案就是修改文件属于哪个用户和用户组。
**chown命令**：
用于设置文件的属主和属组
命令格式:`chown OWNER[:[GROUP]] FILE...`
例子:
设置文件afile的属主为用户st01`# chown st01 afile`
设置文件afile的属主为st03，并设置文件的属组为class2 `# chown st03:class2 afile`
设置文件afile的属组为用户组class1`# chown :class1 afile`

## 6.文件的特殊权限

特殊权限：在复杂多变的生产环境中，单纯设置文件的rwx权限无法满足我们对安全和灵活性的需求，因此便有了SUID、SGID与SBIT的特殊权限位。这是一种对文件权限进行设置的特殊功能，可以与一般权限同时使用，以弥补一般权限不能实现的功能。

**6.1 SUID特殊权限介绍**
**SUID**
对应user的权限位置：当s这个标志出现在文件所有者的x权限上时，例如文件权限状态`-rwsr-xr-x`，此时就称为Set UID，简称为SUID的特殊权限。
SUID有这样的限制和功能：
SUID权限仅对二进制程序有效；
执行者对于该程序需要具有x的可执行权限；
本权限仅在执行该程序的过程中有效；
执行者将具有该程序所有者的权限。

**6.2 SGID特殊权限介绍**
**SGID**
对应group权限位置:当s标志出现在文件所有者的x权限时称为SUID，那么s出现在用户组的x权限时称为SGID。（U表示user，G表示group）。
SGID有如下功能：
让执行者临时拥有属组的权限（对拥有执行权限的二进制程序进行设置）；
在某个目录中创建的文件自动继承该目录的用户组（只可以对目录进行设置）。
SGID的第一种功能是参考SUID而设计的，不同点在于执行程序的用户获取的不再是文件所有者的临时权限，而是获取到文件所属组的权限。

**6.3 SBIT特殊权限介绍**
**SBIT**
对应other用户权限位置
SBIT（Sticky Bit）特殊权限位（特殊权限位之粘滞位）。SBIT特殊权限位可确保用户只能删除自己的文件，而不能删除其他用户的文件。换句话说，当对某个目录设置了SBIT粘滞位权限后，那么该目录中的文件就只能被其所有者执行删除操作了。SBIT目前只对目录有效。
RHEL7系统中的/tmp作为一个共享文件的目录，默认已经设置了SBIT特殊权限位，因此除非是该目录的所有者，否则无法删除这里面的文件。

## 7.文件的隐藏属性

隐藏属性：Linux系统中的文件除了具备一般权限和特殊权限之外，还有一种隐藏权限，即被隐藏起来的权限，默认情况下不能直接被用户发觉。有用户曾经在生产环境中碰到过明明权限充足但却无法删除某个文件的情况，或者仅能在日志文件中追加内容而不能修改或删除内容，这在一定程度上阻止了黑客篡改系统日志的图谋，因此这种“奇怪”的文件也保障了Linux系统的安全性。

**7.1 chattr命令**
**chattr命令**
用于设置文件的隐藏权限
命令格式：`chattr [选项] 文件`
如果想要把某个隐藏功能添加到文件上，则需要在命令后面追加“+参数”，如果想要把某个隐藏功能移出文件，则需要追加“-参数”。
常用选项
i无法对文件进行修改；若对目录设置了该参数，则仅能修改其中的子文件内容而不能新建或删除文件.
a仅允许补充（追加）内容，无法覆盖/删除内容（Append Only）

**7.2 lsattr命令**
**lsattr命令**用于显示文件的隐藏权限，在Linux系统中，文件的隐藏权限必须使用lsattr命令来查看，平时使用的ls之类的命令则看不出端倪。
命令格式：`lsattr [选项] 文件`
一旦使用lsattr命令后，文件上被赋予的隐藏权限马上就会原形毕露。此时可以按照显示的隐藏权限的类型（字母），使用chattr命令将其去掉。

## 8.su命令与sudo服务

**8.1 su命令**
su命令可以解决切换用户身份的需求，使得当前用户在不退出登录的情况下，顺畅地切换到其他用户，比如从root管理员切换至普通用户。
su命令与用户名之间有一个减号（-），这意味着完全切换到新的用户，即把环境变量信息也变更为新用户的相应信息，而不是保留原始的信息。
当从root管理员切换到普通用户时是不需要密码验证的，而从普通用户切换成root管理员就需要进行密码验证了。

**8.2 sudo服务**
使用sudo命令把特定命令的执行权限赋予给指定用户，这样既可保证普通用户能够完成特定的工作，也可以避免泄露root管理员密码。sudo服务的配置原则也很简单：在保证普通用户完成相应工作的前提下，尽可能少地赋予额外的权限。
这个服务是通过修改配置文件（/etc/sudoers）来提供集中的用户管理、权限与主机等设置，root用户可以通过visudo来修改这个配置文件。

**sudo服务的工作过程**
1，当用户执行sudo时，系统会主动寻找/etc/sudoers文件，判断该用户是否有执行sudo的权限
2，确认用户具有可执行sudo的权限后，让用户输入用户自己的密码确认
3，若密码输入成功，则开始执行sudo后续的命令
4，root执行sudo时不需要输入密码(sudoers文件中有配置root ALL=(ALL) ALL这样一条规则)
5，若欲切换的身份与执行者的身份相同，也不需要输入密码

第一步：
利用visudo为指定用户添加权限
`[root@localhost ~]# visudo`
关于root用户权限完整格式：
`root ALL=(ALL:ALL) ALL`
root表示能使用sudo命令的用户；
第一个ALL表示允许使用sudo的主机；
第二个ALL及第三个ALL表示用户组及用户；
第四个ALL表示sudo可执行的命令，即所有命令；
第二步：
利用visudo修改了配置以后，切换至指定的普通用户身份，此时就可以用sudo -l命令查看到所有可执行的命令了，此处注意输入的是普通用户的密码。

使用sudo命令来执行特殊的权限
**sudo命令**用于给普通用户提供额外的权限来完成原本root管理员才能完成的任务
命令格式`sudo [选项] 命令名称`
常用选项:
-h列出帮助信息
-l列出当前用户可执行的命令
-u用户名或UID值以指定的用户身份执行命令

第三步：使用sudo命令来执行特殊的权限对于普通用户无权查看的shadow文件，利用sudu命令就可以获得权限进行查看。